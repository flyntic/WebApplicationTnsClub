{"ast":null,"code":"import _asyncToGenerator from \"C:/tennisclub/WebApplicationTnsClub/WebApplicationTnsClub/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//import { FormsModule } from '@angular/forms';\nimport { AsyncPipe } from \"@angular/common\";\nimport { AppAuthLogoutItem, AppAuthHiItem } from './../app.auth.menu';\nimport { AuthGuard } from '../../auth-guard.service';\nimport { Observable, of } from 'rxjs';\nimport { ChangeDetectorRef } from '@angular/core';\nimport { map } from 'rxjs/internal/operators/map';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../auth.service\";\nexport let AuthenticatedComponent = /*#__PURE__*/(() => {\n  class AuthenticatedComponent {\n    constructor(authService, ref) {\n      this.authService = authService;\n      this.ref = ref;\n      this.logouttext = AppAuthLogoutItem['text'];\n      this.hitext = AppAuthHiItem['text'];\n      this.logoutpng = AppAuthLogoutItem['icon'];\n      this.username2$ = new BehaviorSubject(null);\n    }\n    ngOnInit() {\n      console.log(\"auth_comp ngOnInint\");\n      this.username3$ = this.username2$.asObservable();\n      this.username$ = this.authService.getUser().pipe(map(data => data['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']));\n      // this._observer = new Observer<any>();\n      this.username1$ = of(this.username$);\n      console.log(\"auth_comp ngOnInint2\");\n      this.i$ = Observable.create(observer => {\n        let value = 0;\n        setInterval(() => observer.next(value++), 1000);\n        //   return () => clearInterval(interval);\n      });\n      //  this.username1$.subscribe(this._observer);\n      //  this.username1$ = Observable.create(this._observer);\n      // observer) => {\n      //  this._observer = observer; this._observer.next(\"admin11\"); \n      // const interval = setInterval(() => { observer.next(value); value++; }, 1000);\n      //   return () => clearInterval(interval);\n      // })\n      console.log(\"auth_comp ngOnInint3\");\n      // this.username1$.subscribe(\n      //     x => console.log('Observer got a next value: ' + x),\n      //     err => console.error('Observer got an error: ' + err),\n      //     () => console.log('Observer got a complete notification')\n      // );\n      console.log(\"auth_comp ngOnInint4\");\n    }\n    loginUsername() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        console.log(\"loginUser begin\");\n        //  this.i$.next(1000);\n        //this.username1$ = await this.authService.getUser().pipe(\n        //    map((data) => data['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']));this.user1 = await this.authService.getUser().toPromise(); //\n        _this.user$ = yield _this.authService.getUser(); //\n        _this.user1 = yield _this.authService.getUser().toPromise(); //\n        _this.username$ = _this.user1['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name'];\n        //  setInterval(() => { console.log(\"authehn2!!!\" + this.i$);  this.ref.detectChanges(); }, 1000);\n        // this.username1$.subscribe(res => { console.log(\"fgagaa\" + res); this.ref.markForCheck(); });\n        _this.username2$.next(_this.username$); //.asObservable();\n        _this.username1$ = of(_this.username$);\n        _this.username1$.subscribe(res => {\n          console.log(\"LoginUser username1$ \" + res);\n          _this.ref.detectChanges();\n        }); // = of(this.username$);\n        _this.username1$ = of(\"admin55\");\n        //   this._observer.next(\"admin44\"); \n        _this.username2$.subscribe(res => {\n          console.log(\"LoginUser username2 \" + res);\n          ;\n          _this.ref.detectChanges();\n        });\n        _this.username3$ = _this.username2$.asObservable(); //\n        _this.username3$.subscribe(res => {\n          console.log(\"LoginUser username3 \" + res);\n          _this.ref.detectChanges();\n        });\n        _this.ref.detectChanges();\n        console.log(\"LoginUser end +\" + _this.username$);\n      })();\n    }\n    logout() {\n      //  return this.auth.logout();\n    }\n    static {\n      this.ɵfac = function AuthenticatedComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AuthenticatedComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AuthenticatedComponent,\n        selectors: [[\"app-authenticated\"]],\n        inputs: {\n          username$: \"username$\"\n        },\n        standalone: true,\n        features: [i0.ɵɵProvidersFeature([AuthGuard, ChangeDetectorRef]), i0.ɵɵStandaloneFeature],\n        decls: 10,\n        vars: 9,\n        consts: [[1, \"horizontal-menu\"], [3, \"click\"], [1, \"icon\"], [1, \"menu-icon\", 3, \"src\"]],\n        template: function AuthenticatedComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"span\", 0)(1, \"span\");\n            i0.ɵɵtext(2);\n            i0.ɵɵpipe(3, \"async\");\n            i0.ɵɵpipe(4, \"async\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"span\", 1);\n            i0.ɵɵlistener(\"click\", function AuthenticatedComponent_Template_span_click_5_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵelementStart(6, \"span\", 2);\n            i0.ɵɵelement(7, \"img\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"span\", 0);\n            i0.ɵɵtext(9);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate3(\" \", ctx.hitext, \"\", i0.ɵɵpipeBind1(3, 5, ctx.i$), \" \", i0.ɵɵpipeBind1(4, 7, ctx.username1$), \" \");\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"src\", ctx.logoutpng, i0.ɵɵsanitizeUrl);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.logouttext);\n          }\n        },\n        dependencies: [AsyncPipe],\n        styles: [\"div.horizontal-menu[_nghost-%COMP%]{font-size:10px}.horizontal-menu[_nghost-%COMP%]   .menu-item[_ngcontent-%COMP%]{font-size:12px;padding:3px 15px 3px 8px}.menu-icon[_ngcontent-%COMP%]{height:30px;width:30px;margin:10px}.menu-text[_ngcontent-%COMP%]{font-size:15px}.active[_ngcontent-%COMP%]{outline:none;transform:scale(1.05);background-color:#f73a3acc}.horizontal-menu.in-popup[_nghost-%COMP%]{padding-left:14px}span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:3px 0 3px 5px;padding:0;background:transparent;border:0}span.dropdown[_ngcontent-%COMP%], span.dropleft[_ngcontent-%COMP%], span.dropright[_ngcontent-%COMP%]{float:right}span.dropdown[_ngcontent-%COMP%] > button.dropdown-toggle[_ngcontent-%COMP%]:after{border-top-color:#fff}span.dropright[_ngcontent-%COMP%] > button.dropdown-toggle[_ngcontent-%COMP%]:after{border-left-color:#fff}span.dropleft[_ngcontent-%COMP%] > button.dropdown-toggle[_ngcontent-%COMP%]:before{border-right-color:#fff}li[_ngcontent-%COMP%]{display:inline}ul[_ngcontent-%COMP%]{float:right;display:inline!important}.horizontal-menu[_nghost-%COMP%]{display:inline-block;max-width:200px;min-width:200px;height:100vh;padding-left:4px;flex-grow:0;background-color:#35858a;overflow-x:hidden;overflow-y:auto}.horizontal-menu[_nghost-%COMP%] > span.icon[_ngcontent-%COMP%]{width:10px;height:10px}div[_ngcontent-%COMP%]{margin-top:20px}\"],\n        changeDetection: 0\n      });\n    }\n  }\n  return AuthenticatedComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}