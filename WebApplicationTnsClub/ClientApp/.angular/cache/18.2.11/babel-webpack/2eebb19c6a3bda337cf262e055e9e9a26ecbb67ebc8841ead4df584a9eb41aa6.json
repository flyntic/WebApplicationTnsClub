{"ast":null,"code":"import _asyncToGenerator from \"C:/tennisclub/WebApplicationTnsClub/WebApplicationTnsClub/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let AuthService = /*#__PURE__*/(() => {\n  class AuthService {\n    constructor(http) {\n      this.http = http;\n      this.user = {\n        user_id: \"1\",\n        username: \"anna\"\n      };\n      this.username = null;\n      //  this.user=  this.loadUser();\n    }\n    loadUser() {\n      return this.http.get('/api/user');\n    } //this.user }.toPromise()\n    /*\n    {\n        const user =\n             .subscribe(user => {\n                this.user = user;\n                this.username = user['username'];\n                 console.log(this.user);\n                 console.log(this.username);\n            });\n        return this.user;\n     }\n    */\n    // getUser()=> user;\n    /* const user = await this.http.get<any>(\"/api/user\");//\n      if ('user_id' in user)\n     {\n         this.user = user;console.log(user);\n      }\n     else console.log(\"NO --\"+user);\n      \n      return user;\n    }*/\n    login(loginForm) {\n      var _this = this;\n      return this.http.post(\"/api/login\", loginForm, {\n        withCredentials: true\n      }).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (_) {\n          yield _this.loadUser();\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n    register(registerForm) {\n      return this.http.post(\"/api/register\", registerForm, {\n        withCredentials: true\n      }).subscribe(_ => {\n        this.loadUser();\n      });\n    }\n    logout() {\n      return this.http.get(\"/api/logout\").subscribe(_ => this.user = null);\n    }\n    static {\n      this.ɵfac = function AuthService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AuthService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: AuthService,\n        factory: AuthService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return AuthService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}